<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GWJGMNS3XR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GWJGMNS3XR');
</script>
  
  <title>åˆæ¢ Blazor WebAssembly (WASM) | The Skeptical Software Engineer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ç­†è¨˜ä½¿ç”¨ Blazor WebAssembly é–‹ç™¼çš„åˆé«”é©—ï¼Œæƒ³è¦å¯«ä¸€å€‹ç´”ç²¹å‰ç«¯çš„ç°¡æ˜“æ‡‰ç”¨ï¼Œä½†é€™æ¬¡ä¸æ˜¯é¸æ“‡ Vue.js æˆ–è€…æ˜¯ jQueryï¼Œè€Œæ˜¯ç›´æ¥æŠŠå¾Œç«¯çš„ C# æ‹¿ä¾†å‰ç«¯å¯« ğŸ˜† æœ€å¾Œçµåˆ GitHub Action çš„å¦ä¸€å€‹åˆé«”é©—ï¼Œé”æˆ Commit è‡ªå‹•éƒ¨ç½²åœ¨ gh-pages åˆ†æ”¯çš„åŠŸæ•ˆï¼Œå®Œæˆ Commit å³éƒ¨ç½²çš„ä¾¿åˆ© ğŸ˜">
<meta property="og:type" content="article">
<meta property="og:title" content="åˆæ¢ Blazor WebAssembly (WASM)">
<meta property="og:url" content="https://sdwh.dev/posts/2023/12/Blazor-WebAssembly/index.html">
<meta property="og:site_name" content="The Skeptical Software Engineer">
<meta property="og:description" content="ç­†è¨˜ä½¿ç”¨ Blazor WebAssembly é–‹ç™¼çš„åˆé«”é©—ï¼Œæƒ³è¦å¯«ä¸€å€‹ç´”ç²¹å‰ç«¯çš„ç°¡æ˜“æ‡‰ç”¨ï¼Œä½†é€™æ¬¡ä¸æ˜¯é¸æ“‡ Vue.js æˆ–è€…æ˜¯ jQueryï¼Œè€Œæ˜¯ç›´æ¥æŠŠå¾Œç«¯çš„ C# æ‹¿ä¾†å‰ç«¯å¯« ğŸ˜† æœ€å¾Œçµåˆ GitHub Action çš„å¦ä¸€å€‹åˆé«”é©—ï¼Œé”æˆ Commit è‡ªå‹•éƒ¨ç½²åœ¨ gh-pages åˆ†æ”¯çš„åŠŸæ•ˆï¼Œå®Œæˆ Commit å³éƒ¨ç½²çš„ä¾¿åˆ© ğŸ˜">
<meta property="og:locale">
<meta property="og:image" content="https://sdwh.dev/assets/DotNetIcon.png">
<meta property="og:image" content="https://sdwh.dev/assets/Blazor-WASM-Apps.png">
<meta property="og:image" content="https://sdwh.dev/assets/openmoji-github.svg">
<meta property="og:image" content="https://sdwh.dev/assets/Play-Button.svg">
<meta property="og:image" content="https://sdwh.dev/assets/GitHub-Action-Workflow-Permissions-Read-And-Write.png">
<meta property="article:published_time" content="2023-12-10T10:49:37.000Z">
<meta property="article:modified_time" content="2023-12-10T12:34:20.188Z">
<meta property="article:author" content="Webber">
<meta property="article:tag" content="MVC">
<meta property="article:tag" content="ASPNET">
<meta property="article:tag" content="Blazor">
<meta property="article:tag" content="Conversation">
<meta property="article:tag" content="Generated">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sdwh.dev/assets/DotNetIcon.png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap');
  </style>
  
    
      <link rel="icon" href="/assets/favicon.ico">
      
      
        
<link rel="stylesheet" href="/css/style.css">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/themes/prism-okaidia.min.css"/>
<meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="The Skeptical Software Engineer" type="application/atom+xml">
</head>
      
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">The Skeptical Software Engineer</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/apps">Apps</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" href="/search/" style="margin-right: 15px;"></a>
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Blazor-WebAssembly" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/2023/12/Blazor-WebAssembly/" class="article-date">
  <time datetime="2023-12-10T10:49:37.000Z" itemprop="datePublished">2023-12-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Dev/">Dev</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      åˆæ¢ Blazor WebAssembly (WASM)
    </h1>
  

      </header>
    
    <hr />
    <div class="article-entry" itemprop="articleBody">

      
        
    <div id="toc" class="toc-article">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Blazor-WebAssembly"><span class="toc-text">Blazor WebAssembly</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Async-amp-Await"><span class="toc-text">Async &amp; Await</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deploy-to-GitHub-Page-with-GitHub-Action"><span class="toc-text">Deploy to GitHub Page with GitHub Action</span></a></li></ol>
    </div>
  
  
        <hr/>
        <p>ç­†è¨˜ä½¿ç”¨ Blazor WebAssembly é–‹ç™¼çš„åˆé«”é©—ï¼Œæƒ³è¦å¯«ä¸€å€‹ç´”ç²¹å‰ç«¯çš„ç°¡æ˜“æ‡‰ç”¨ï¼Œä½†é€™æ¬¡ä¸æ˜¯é¸æ“‡ Vue.js æˆ–è€…æ˜¯ jQueryï¼Œè€Œæ˜¯ç›´æ¥æŠŠå¾Œç«¯çš„ C# æ‹¿ä¾†å‰ç«¯å¯« ğŸ˜† æœ€å¾Œçµåˆ GitHub Action çš„å¦ä¸€å€‹åˆé«”é©—ï¼Œé”æˆ Commit è‡ªå‹•éƒ¨ç½²åœ¨ gh-pages åˆ†æ”¯çš„åŠŸæ•ˆï¼Œå®Œæˆ Commit å³éƒ¨ç½²çš„ä¾¿åˆ© ğŸ˜</p>
<a href="/posts/2023/12/Blazor-WebAssembly/" title="logo" class="fancybox" rel="article0">
  <img src="/assets/DotNetIcon.png" alt="logo" width="200px">
</a>

<span id="more"></span>

<h2 id="Blazor-WebAssembly"><a href="#Blazor-WebAssembly" class="headerlink" title="Blazor WebAssembly"></a>Blazor WebAssembly</h2><p><img src="/assets/Blazor-WASM-Apps.png"></p>
<div style="display: flex; justify-content:center;">
  <a href="https://github.com/sdwh/LineageEnhance" target="_blank" style="margin-right:2rem">
    <img src="/assets/openmoji-github.svg" width="50px"> GitHub
  </a>
  <a href="https://sdwh.dev/LineageEnhance" target="_blank">
    <img src="/assets/Play-Button.svg" width="50px"> Demo
  </a>
</div>

<p>åœ¨ .NET 7ï¼ŒBlazor åˆ†ç‚º Blazor Server ä»¥åŠ Blazor WebAssemblyï¼Œæœ¬æ¬¡é¸æ“‡çš„æ˜¯å®Œå…¨éƒ¨ç½²æ–¼ Client ç«¯çš„ Web Assemblyã€‚</p>
<table>
<thead>
<tr>
<th>Features</th>
<th>Blazor Server</th>
<th>Blazor WebAssembly</th>
</tr>
</thead>
<tbody><tr>
<td>åŸ·è¡Œé€Ÿåº¦</td>
<td>åˆå§‹åŸ·è¡Œå¿«ï¼Œå› ç‚ºå¤§éƒ¨åˆ† Code åœ¨ Server åŸ·è¡Œ</td>
<td>åˆå§‹åŸ·è¡Œæ…¢ï¼Œéœ€è¦ä¸‹è¼‰æ•´å€‹æ‡‰ç”¨ Dependency</td>
</tr>
<tr>
<td>éƒ¨ç½²è¤‡é›œåº¦</td>
<td>ç°¡å–®ï¼Œæ‰€æœ‰ Code åœ¨ Server åŸ·è¡Œ</td>
<td>è¤‡é›œï¼Œéœ€è¦å‰ç«¯éƒ¨ç½²</td>
</tr>
<tr>
<td>è³‡æºåˆ©ç”¨</td>
<td>Server ç®¡ç†è³‡æº</td>
<td>åˆ©ç”¨ Client Side è¨ˆç®—èƒ½åŠ›</td>
</tr>
<tr>
<td>æ•¸æ“šä¿è­·</td>
<td>è¼ƒå®¹æ˜“ä¿è­·æ•æ„Ÿæ•¸æ“š</td>
<td>éœ€è¦ Client Side å®‰å…¨æªæ–½</td>
</tr>
<tr>
<td>ç¶²è·¯ä¾è³´</td>
<td>é«˜åº¦ä¾è³´ç¶²è·¯é€£ç·šå“è³ª</td>
<td>ä¸‹è¼‰å¾Œå¯ä»¥ Offline Running</td>
</tr>
<tr>
<td>ä¼ºæœå™¨è² æ“”</td>
<td>éš¨ç”¨æˆ¶å¢åŠ è€Œå¢åŠ </td>
<td>ä¸»è¦åœ¨ Client Side è™•ç†</td>
</tr>
<tr>
<td>å»¶é²æ•æ„Ÿ</td>
<td>å°ç¶²è·¯å»¶é²æ•æ„Ÿ</td>
<td>è¼ƒå°‘å—ç¶²è·¯å»¶é²å½±éŸ¿</td>
</tr>
<tr>
<td>é©ç”¨å ´æ™¯</td>
<td>å¿«é€Ÿéƒ¨ç½²ã€é »ç¹ Server äº¤äº’çš„æ‡‰ç”¨</td>
<td>é«˜å³æ™‚æ€§ã€éœ€è¦ Offlline åŠŸèƒ½çš„æ‡‰ç”¨</td>
</tr>
</tbody></table>
<p>å°ˆæ¡ˆå»ºç«‹ä¹‹å¾Œï¼Œé¦¬ä¸Šé–‹å¯«ï¼Œå»¶çºŒè‘—ä¹‹å‰å¯« Vue.js çš„ç¶“é©—ï¼Œä¸€é–‹å§‹å°±æ˜¯å–®æª”é–‹ç™¼ï¼Œå®Œå…¨æ²’è€ƒæ…® Components è¨­è¨ˆçš„ ğŸ˜</p>
<p>è€Œåœ¨ Blazor ç•¶ä¸­æ˜¯æ’°å¯« <code>/Pages/Index.razor</code> å› ç‚ºæœ‰ ASP.NET MVC å¯« Razor çš„ç¶“é©—ï¼Œä¹‹å‰ä¹ŸæŠŠç©é Razor Pages å°ˆæ¡ˆé¡å‹ï¼Œå› æ­¤å¯«èµ·ä¾†å®Œå…¨æ²’å•é¡Œã€‚ä¹Ÿå› ç‚º Vue.js çš„ç¶“é©—ï¼Œå¤§æ¦‚çŸ¥æ›‰ä¸Šé¢ Template ä¸‹é¢ Code çš„å€éš”ï¼Œåªå·®æ²’æœ‰ Scoped CSS ğŸ˜…</p>
<p>ä»¥å¾€è¦é€é JS çš„è™•ç†ï¼Œå»¶çºŒè‘— Vue.js çš„ç¶“é©—ï¼Œæ‰¾åˆ°å¦‚ä½•åœ¨ Blazor Razor ä½¿ç”¨ Two-Way Bindingï¼Œä¸€åˆ‡çš„å·¥ä½œå°±è¼•é¬†çš„å¯«äº†èµ·ä¾†ã€‚</p>
<p><code class="watch">Pages/Index.razor</code></p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token operator">&lt;</span>td<span class="token operator">></span>@<span class="token punctuation">(</span>item<span class="token punctuation">.</span>Defence <span class="token operator">-</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>IsEnhanceable <span class="token punctuation">?</span> item<span class="token punctuation">.</span>Enhanced <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
<span class="token operator">&lt;</span>td<span class="token operator">></span>
  @<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>IsEnhanceable<span class="token punctuation">)</span>
  <span class="token punctuation">&#123;</span>
      <span class="token operator">&lt;</span>button 
        <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn btn-outline-info me-lg-3 btn-sm @((appRuntime.CoolDownState) ? "</span>disabled<span class="token string">" : "</span>" <span class="token punctuation">)</span>"
        @onclick<span class="token operator">=</span><span class="token string">"() => Enhance(item)"</span><span class="token operator">></span>é˜²å·<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é‚è¼¯æ§åˆ¶ä»€éº¼çš„å°±æ˜¯ Razor ç¿’æ…£çš„èªæ³•ï¼ŒClick äº‹ä»¶ å‰‡é€é <code>@onclick</code> æ­é… lambda çš„æ–¹å¼ä¾†è¨»å†Šä½¿ç”¨ã€‚</p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"col-12 col-lg-4 d-flex align-items-center"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>label<span class="token operator">></span>LVï¼š<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token class-name">input</span> type<span class="token operator">=</span><span class="token string">"number"</span> @bind<span class="token operator">=</span><span class="token string">"appRuntime.Level"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"form-control"</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"col-12 col-lg-4 mt-3 mt-lg-0 d-flex align-items-center"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>span<span class="token operator">></span>ACï¼š<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token class-name">input</span> type<span class="token operator">=</span><span class="token string">"number"</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"@sumDefence()"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"form-control"</span> disabled<span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">sumDefence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> baseDef <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> defFromLevelDex <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>appRuntime<span class="token punctuation">.</span>Level <span class="token operator">/</span> <span class="token number">4.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> equip <span class="token keyword">in</span> appRuntime<span class="token punctuation">.</span>Equipments<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        baseDef <span class="token operator">=</span> baseDef <span class="token operator">+</span> equip<span class="token punctuation">.</span>Defence <span class="token operator">-</span> equip<span class="token punctuation">.</span>Enhanced<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    baseDef <span class="token operator">-=</span> defFromLevelDex<span class="token punctuation">;</span>
    <span class="token keyword">return</span> baseDef<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Two-Way Binding æ ¹æ“š Input çš„æ“ä½œï¼Œå°æ‡‰çš„å‹•æ…‹è¨ˆç®—ï¼Œåªéœ€è¦åœ¨ input é€é <code>@Bind</code> å°±å¯ä»¥è¼•é¬†é”æˆã€‚</p>
<p>å¯«è‘—å¯«è‘—ï¼Œå› ç‚ºç‹€æ…‹ç®¡ç†çš„è™•ç†å¤šäº†èµ·ä¾†ï¼Œæ–¼æ˜¯å°±ç¨ç«‹æŠ½å‡ºä¾†ï¼Œå»¶çºŒ ASP.NET MVC çš„ç¿’æ…£ï¼Œç”¨ Models ä¾†ç®¡ç†è³‡æ–™æ¨¡å‹ï¼Œä¹Ÿå› ç‚ºæ‡‰ç”¨ç³»çµ±ä¸å¤§ï¼Œæ²’æœ‰å†é¡å¤–åš Service æˆ–è€… Business Logic çš„åˆ†å±¤ï¼Œç›´æ¥åœ¨ Models é›†åˆèµ·ä¾†ã€‚</p>
<p><code class="watch">/Models/AppRuntime.cs</code></p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppRuntime</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> CoolDownState <span class="token punctuation">&#123;</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Level <span class="token punctuation">&#123;</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token number">48</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Dex <span class="token punctuation">&#123;</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Experience <span class="token punctuation">&#123;</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>Equipment<span class="token punctuation">></span></span> Equipments <span class="token punctuation">&#123;</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token function">AppRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        Equipments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Equipment<span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Equipment</span> <span class="token punctuation">&#123;</span> Name <span class="token operator">=</span> <span class="token string">"è‰¾çˆ¾ç©†çš„ç¥ç¦"</span><span class="token punctuation">,</span> Safe <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> Defence <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span> Image <span class="token operator">=</span> <span class="token string">"helmet"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Equipment</span> <span class="token punctuation">&#123;</span> Name <span class="token operator">=</span> <span class="token string">"ç²¾éˆé‡‘å±¬ç›”ç”²"</span><span class="token punctuation">,</span> Safe <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> Defence <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span> Image <span class="token operator">=</span> <span class="token string">"armor"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code class="watch">Program.cs</code></p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp">builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AppRuntime<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>éœ€è¦å…±ç”¨çš„ç‹€æ…‹è³‡æ–™ï¼Œé€é IoC çš„æ–¹å¼æ³¨å…¥ã€‚</p>
<p><code class="watch">/Pages/Index.razor</code></p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp">@<span class="token keyword">using</span> LineageEnhance<span class="token punctuation">.</span>Models
@inject AppRuntime appRuntime<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>å°æ–¼éœ€è¦ä½¿ç”¨çš„é é¢ç›´æ¥ <code>@inject</code> ä»¥åŠ <code>@using</code> å°±å¯ä»¥ä½¿ç”¨ï¼Œè¶…ç´šæ–¹ä¾¿ ğŸ˜</p>
<h3 id="Async-amp-Await"><a href="#Async-amp-Await" class="headerlink" title="Async &amp; Await"></a>Async &amp; Await</h3><p>è€Œé€™æ¬¡å¯¦é©—çš„ Appsï¼Œæƒ³è¦ä½¿ç”¨éåŒæ­¥çš„æ•ˆæœï¼Œåœ¨å·¥ä½œåŸ·è¡Œå¾Œï¼Œå…ˆæš«åœé‡è¤‡è§¸ç™¼å·¥ä½œï¼Œä½†åŒæ™‚åˆå¯ä»¥é€²è¡Œå…¶ä»–é¡å‹å·¥ä½œçš„æ–¹å¼ã€‚</p>
<p>ä»¥å¾€æš«åœéƒ½æ˜¯é€é <code>Thread.Sleep</code>ï¼Œä½†é€™æ¨£æœƒè®“æ‰€æœ‰çš„æ“ä½œéƒ½åœä¸‹ä¾†ç­‰å¾…ï¼Œä¸æ˜¯éåŒæ­¥çš„æ•ˆæœã€‚</p>
<p>é‹ç”¨å…±ç”¨çš„ç‹€æ…‹ <code>CoolState</code>ï¼Œç•¶ Button è§¸ç™¼ï¼Œæœƒè§¸ç™¼éåŒæ­¥çš„ Methodï¼Œä½†ä¸å¿… Awaitï¼Œè€Œæ˜¯æœƒä»»ç”±ç­‰å¾…ï¼Œæ–¼æ˜¯åŒæ™‚å°±å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…ã€‚</p>
<p><code class="watch">/Pages/Index.razor</code></p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Enhance</span><span class="token punctuation">(</span><span class="token class-name">Equipment</span> equipment<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> blessed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>equipment<span class="token punctuation">.</span>IsEnhanceable <span class="token operator">||</span> appRuntime<span class="token punctuation">.</span>CoolDownState <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    appRuntime<span class="token punctuation">.</span>CoolDownState <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> enhanceSystem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EnhanceSystem</span><span class="token punctuation">(</span>appRuntime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> enhanceSystem<span class="token punctuation">.</span><span class="token function">Enhance</span><span class="token punctuation">(</span>equipment<span class="token punctuation">,</span> blessed<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™é‚Šçš„ Enhance é¡ä¼¼ Controller çš„ç”¨é€”ï¼Œä¸»è¦å…ˆå°‡æŒ‰éˆ•çš„ç‹€æ…‹é€é <code>appRuntime.CoolDownState</code> èª¿æ•´ç‚ºä¸å¯ä½¿ç”¨ï¼Œè€Œ Controller æœ¬èº«ä¹Ÿæœƒæª¢æŸ¥å¦‚æœæ˜¯ä¸å…è¨±ä½¿ç”¨çš„ç‹€æ…‹æœƒç›´æ¥ returnã€‚</p>
<p>å¯¦éš›çš„é‹ä½œå‰‡æ˜¯é€éå·²ç¶“æŠ½å‡ºä¾†çš„ <code>EnhanceSystem.Enhance</code> ä¾†é€²è¡Œï¼Œå…¶å¯¦æ˜¯ä¸éœ€è¦ä½¿ç”¨ <code>await</code> ä½† IDE ä¸å–œæ­¡ï¼ŒIDE èªç‚º Enhace æ˜¯ <code>async Task</code> å°±æ‡‰è©²è¦æœ‰ <code>await</code>ï¼Œä½†å¯ä»¥é€é <code>ConfigureAwait(false)</code> çš„æ–¹å¼ä¾†è§£é™¤ ğŸ˜…</p>
<p><code class="watch">/Models/EnhanceSystem.cs</code></p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Enhance</span><span class="token punctuation">(</span><span class="token class-name">Equipment</span> equipment<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> blessed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>

    <span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _appRuntime<span class="token punctuation">.</span>CoolDownState <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è€Œå› ç‚º <code>CoolDownState</code> æ˜¯å¯¦ä½œåˆ»æ„çš„ï¼Œé€é <code>await Task.Delay</code> ä¾†é”æˆï¼Œè€Œéä½¿ç”¨ <code>Thread.Sleep</code>ï¼Œæœ€å¾Œä¹Ÿåœ¨ <code>EnhanceSystem.Enhance</code> çš„çµå°¾æ¢å¾© <code>CoolDownState</code>ã€‚</p>
<h2 id="Deploy-to-GitHub-Page-with-GitHub-Action"><a href="#Deploy-to-GitHub-Page-with-GitHub-Action" class="headerlink" title="Deploy to GitHub Page with GitHub Action"></a>Deploy to GitHub Page with GitHub Action</h2><ol>
<li>Settings â€œWorkflow permissionsâ€ : â€œRead and write permissionsâ€ : è§£æ±º GitHub Action åŸ·è¡Œ ç™¼ç”Ÿ <strong>â€˜/usr/bin/gitâ€™ failed with exit code 128</strong> æ¬Šé™ä¸è¶³çš„å•é¡Œ</li>
</ol>
<p><img src="/assets/GitHub-Action-Workflow-Permissions-Read-And-Write.png"></p>
<ol start="2">
<li>æ–°å¢ <code>.nojekyll</code> : ç›´æ¥åœ¨ <code>/wwwroot</code> åŠ å…¥ç©ºæª”æ¡ˆ</li>
<li>æ–°å¢ 404.html : é€é GitHub Action å»è™•ç†</li>
<li>ä¿®æ­£ <code>index.html</code> base href: é€é GitHub Action</li>
</ol>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> .NET

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">deploy-to-github-pages</span><span class="token punctuation">:</span>

    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup .NET
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>dotnet@v2
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">dotnet-version</span><span class="token punctuation">:</span> 7.0.x
    
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Publish .NET Core Project
      <span class="token key atrule">run</span><span class="token punctuation">:</span> dotnet publish LineageEnhance.csproj <span class="token punctuation">-</span>c Release <span class="token punctuation">-</span>o release <span class="token punctuation">-</span><span class="token punctuation">-</span>nologo

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Modify index.html
      <span class="token key atrule">run</span><span class="token punctuation">:</span> sed <span class="token punctuation">-</span>i 's/\/LineageEnhance"/\/LineageEnhance\/"/' release/wwwroot/index.html
      
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy index.html to 404.html
      <span class="token key atrule">run</span><span class="token punctuation">:</span> cp release/wwwroot/index.html release/wwwroot/404.html
      
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Commit wwwroot to GitHub Pages
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@v4.3.3
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> release/wwwroot<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åƒè€ƒ PuTaoNini æ‰€åˆ†äº«çš„<a target="_blank" rel="noopener" href="https://hackmd.io/@oneheed/HJGE6m5Bq">å°‡ Blazor WebAssembly éƒ¨ç½²åˆ° GitHub Pages</a></p>

      

    </div>
    <footer class="article-footer">
      <a data-url="https://sdwh.dev/posts/2023/12/Blazor-WebAssembly/" data-id="clqfat3tf00bsp4tsfd8m515g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ASPNET/" rel="tag">ASPNET</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blazor/" rel="tag">Blazor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Conversation/" rel="tag">Conversation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Generated/" rel="tag">Generated</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MVC/" rel="tag">MVC</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/posts/2023/12/Python-Load-CSV-Files-As-Namedtuple/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Python Load CSV Files As Namestuple</div>
    </a>
    
    
  
    <a href="/posts/2023/12/CSharp-Dependency-Injection-In-Action/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Dependency Injection è§€æ‘©ç­†è¨˜ (DI &amp; IOC)
        
      </div>
    </a>
  

  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title widget-category-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cloud/">Cloud</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CyberSecurity/">CyberSecurity</a><span class="category-list-count">32</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">145</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design/">Design</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Dev/">Dev</a><span class="category-list-count">245</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IIS/">IIS</a><span class="category-list-count">41</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LearningNote/">LearningNote</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LifeHack/">LifeHack</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Microsoft/">Microsoft</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Misc/">Misc</a><span class="category-list-count">49</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/News/">News</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">72</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Office/">Office</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PowerBI/">PowerBI</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Resource/">Resource</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Toys/">Toys</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TroubleShooting/">TroubleShooting</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a><span class="category-list-count">13</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title widget-archive-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023</a><span class="archive-list-count">136</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a><span class="archive-list-count">218</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a><span class="archive-list-count">241</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">128</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <!-- 2023 -->
      The Skeptical Software Engineer &copy; 2020 - <span class="margin-right"></span>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/apps" class="mobile-nav-link">Apps</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script> -->


  
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/plugins/autoloader/prism-autoloader.min.js"></script>

<script src="/js/script.js"></script>


<script src="/js/custom-script.js"></script>





<!-- <script>hljs.initHighlightingOnLoad();</script> -->
  </div>
</body>
</html>